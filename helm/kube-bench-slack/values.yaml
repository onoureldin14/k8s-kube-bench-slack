# Default values for kube-bench-slack
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# Global configuration
global:
  # Image registry for all images
  imageRegistry: ""
  # Image pull policy
  imagePullPolicy: IfNotPresent

# Namespace configuration
namespace:
  # Name of the namespace (created by Makefile/kubectl)
  name: kube-bench

# Kube-bench configuration
kubebench:
  # Kube-bench image configuration
  image:
    repository: aquasec/kube-bench
    tag: latest
    pullPolicy: IfNotPresent
  
  # Kube-bench scan targets
  targets: "master,node,etcd,policies"
  
  # Output format
  outputFormat: json
  
  # Resource limits and requests
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  
  # Security context
  securityContext:
    privileged: true

# Slack notifier configuration
image:
  # Slack notifier image configuration
  # For local minikube: slack-kube-bench
  # For Docker Hub: your-username/slack-kube-bench
  repository: slack-kube-bench
  tag: latest
  pullPolicy: Never  # Use Never for local minikube, Always for Docker Hub

slack:
  
  # Slack configuration
  channel: "#kube-bench"
  outputDir: "/tmp/kube-bench-results"
  maxWaitTime: 300
  
  # Resource limits and requests
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"
  
  # Slack bot token
  # Can be provided as:
  # 1. A string: --set slack.token="xoxb-your-token" (creates secret automatically)
  # 2. Leave empty to use existing secret named 'slack-credentials'
  token: ""  # Set via --set slack.token="xoxb-..." or leave empty to use existing secret

# Job configuration
job:
  # Job name
  name: kube-bench-security-scan
  
  # Job labels
  labels: {}
  
  # Job annotations
  annotations: {}
  
  # Restart policy
  restartPolicy: Never
  
  # TTL for completed jobs (in seconds)
  ttlSecondsAfterFinished: 3600

# RBAC configuration
rbac:
  # Create RBAC resources
  create: true
  
  # Service account name
  serviceAccount:
    name: kube-bench-sa
    # Annotations for the service account
    annotations: {}
  
  # Cluster role name
  clusterRole:
    name: kube-bench-role
  
  # Cluster role binding name
  clusterRoleBinding:
    name: kube-bench-binding

# Node selection
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity rules
affinity: {}

# Volume configuration
volumes:
  # Shared volume for kube-bench results
  shared:
    name: kube-bench-results
    type: emptyDir
  
  # Kubeconfig volume
  kubeconfig:
    name: kubeconfig
    hostPath:
      path: /etc/kubernetes
      type: Directory

# Monitoring and logging
monitoring:
  # Enable health checks
  healthCheck:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 30
    timeoutSeconds: 10
    failureThreshold: 3
  
  # Log level
  logLevel: INFO

# Development and testing
dev:
  # Enable debug mode
  debug: false
  
  # Test mode (sends test messages instead of real scan)
  testMode: false
